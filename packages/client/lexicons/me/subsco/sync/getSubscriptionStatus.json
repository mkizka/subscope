{
  "lexicon": 1,
  "id": "me.subsco.sync.getSubscriptionStatus",
  "defs": {
    "main": {
      "type": "query",
      "description": "Get the subscription status for the authenticated user",
      "output": {
        "encoding": "application/json",
        "schema": {
          "type": "union",
          "refs": ["#subscribed", "#notSubscribed"]
        }
      }
    },
    "subscribed": {
      "type": "object",
      "required": ["isSubscriber", "syncRepoStatus"],
      "properties": {
        "isSubscriber": {
          "type": "boolean",
          "const": true,
          "description": "The user is a subscriber"
        },
        "syncRepoStatus": {
          "type": "string",
          "enum": ["dirty", "in-process", "ready", "synchronized", "failed"],
          "description": "Current repository sync status"
        }
      }
    },
    "notSubscribed": {
      "type": "object",
      "required": ["isSubscriber"],
      "properties": {
        "isSubscriber": {
          "type": "boolean",
          "const": false,
          "description": "The user is not a subscriber"
        }
      }
    }
  }
}
